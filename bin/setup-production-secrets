#!/usr/bin/env bash
# Generate SECRET_KEY_BASE and optionally add to .env.production
# Run: ./bin/setup-production-secrets

set -e

KEY=$(openssl rand -hex 64)

echo "Generated SECRET_KEY_BASE (add this to .env.production):"
echo ""
echo "SECRET_KEY_BASE=$KEY"
echo ""

if [ -f .env.production ]; then
  if grep -q "^SECRET_KEY_BASE=" .env.production; then
    echo ".env.production already has SECRET_KEY_BASE. Update it manually if needed."
  else
    echo "SECRET_KEY_BASE=$KEY" >> .env.production
    echo "Added SECRET_KEY_BASE to .env.production"
  fi
else
  echo "Create .env.production first (copy from .env.production.example), then add:"
  echo "SECRET_KEY_BASE=$KEY"
fi
